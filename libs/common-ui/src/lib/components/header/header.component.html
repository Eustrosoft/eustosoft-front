<!--
  ~ Copyright (c) 2023. IdrisovII & EustroSoft.org
  ~
  ~ This file is part of eustrosoft-front project.
  ~ See the LICENSE file at the project root for licensing information.
  -->

<mat-toolbar class="container-fluid">
  <span class="mr-4">
    <a
      [href]="(config | async)?.homePageUrl || '/'"
      class="text-decoration-none"
    >
      {{ texts.title }}
    </a>
    |
    {{ texts.appName }}
  </span>
  <span class="logo-spacer"></span>
  <ng-container *ngIf="isAuthenticated$ | async">
    <div class="d-flex d-none">
      <eustrosoft-front-button
        [buttonType]="'button'"
        [buttonStyleType]="'stroked'"
        [buttonText]="texts.appsButtonText"
        [color]="'primary'"
        [matMenuTriggerFor]="appsMenu"
      >
      </eustrosoft-front-button>

      <mat-menu #appsMenu="matMenu">
        <ng-container [ngTemplateOutlet]="appsListTemplate"></ng-container>
      </mat-menu>
    </div>
    <!--    <div class="d-flex">-->
    <!--      <eustrosoft-front-button-->
    <!--        [buttonType]="'button'"-->
    <!--        [buttonStyleType]="'with-icon'"-->
    <!--        [buttonText]="'Личный кабинет'"-->
    <!--        [iconName]="'expand_more'"-->
    <!--        [iconPosition]="'end'"-->
    <!--        [color]="'primary'"-->
    <!--        [matMenuTriggerFor]="lkMenu"-->
    <!--      >-->
    <!--      </eustrosoft-front-button>-->
    <!--      <mat-menu [hasBackdrop]="false" #lkMenu="matMenu">-->
    <!--        <a-->
    <!--          mat-menu-item-->
    <!--          [href]="'https://dev37.qxyz.ru/lk/?subsys=QR'"-->
    <!--          target="_blank"-->
    <!--        >-->
    <!--          Карточки QR-->
    <!--        </a>-->
    <!--        <a mat-menu-item [href]="'https://dev37.qxyz.ru/gen/'" target="_blank">-->
    <!--          QR-Генератор-->
    <!--        </a>-->
    <!--        <a-->
    <!--          mat-menu-item-->
    <!--          [href]="'https://dev37.qxyz.ru/apps/cmsv1/explorer/'"-->
    <!--          target="_blank"-->
    <!--        >-->
    <!--          CMS Управление Файлами-->
    <!--        </a>-->
    <!--        <a-->
    <!--          mat-menu-item-->
    <!--          [href]="'https://dev37.qxyz.ru/lk/qtis.jsp'"-->
    <!--          target="_blank"-->
    <!--        >-->
    <!--          QTIS Администрирование Системы-->
    <!--        </a>-->
    <!--      </mat-menu>-->
    <!--    </div>-->
    <span class="spacer"></span>
    <div class="col-4 d-flex align-items-center justify-content-end">
      <ng-container *ngIf="userInfo$ | async as info">
        <span class="px-3 text-truncate" [title]="info.userFullName">
          {{ info.userFullName }}
        </span>
      </ng-container>
      <eustrosoft-front-button
        [buttonStyleType]="'icon'"
        [iconName]="'logout'"
        [buttonType]="'button'"
        (click)="logout()"
      >
      </eustrosoft-front-button>
    </div>
  </ng-container>
</mat-toolbar>

<ng-template #defaultAppsListTemplate>
  <ng-container *ngIf="config | async as cnf">
    <a mat-menu-item [href]="cnf.loginUrl">Login</a>
    <a mat-menu-item [href]="cnf.explorerUrl"> Explorer </a>
    <a mat-menu-item [href]="cnf.dispatcherUrl"> Dispatcher </a>
    <a mat-menu-item [href]="cnf.appsPageUrl"> All apps page </a>
  </ng-container>
</ng-template>
