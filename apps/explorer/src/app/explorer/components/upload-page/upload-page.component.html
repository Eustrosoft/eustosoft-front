<!--
  ~ Copyright (c) 2023. IdrisovII & EustroSoft.org
  ~
  ~ This file is part of eustrosoft-front project.
  ~ See the LICENSE file at the project root for licensing information.
  -->

<div class="container-fluid">
  <div class="row gx-3 mb-3">
    <div class="col-2">
      <eustrosoft-front-button
        [buttonType]="'button'"
        [buttonStyleType]="'stroked'"
        [buttonText]="'Select files'"
        [color]="'primary'"
        (clicked)="inputFileComponent.fileInput.nativeElement.click()"
      >
      </eustrosoft-front-button>
      <eustrosoft-front-button
        [buttonType]="'button'"
        [buttonStyleType]="'stroked'"
        [buttonText]="'Start'"
        [color]="'primary'"
        (clicked)="start()"
      >
      </eustrosoft-front-button>
    </div>
    <div class="col-2">
      <eustrosoft-front-select
        [label]="'EXPLORER.UPLOAD_TYPE_LABEL_TEXT' | translate"
        [control]="uploadTypeControl | formControl"
        [options]="uploadTypeOptions"
        [fieldAppearance]="'outline'"
        [color]="'primary'"
        class="uploadType"
      ></eustrosoft-front-select>
    </div>
  </div>

  <div class="row gy-3">
    <ng-container
      *ngIf="{
        securityLevel: securityLevelOptions$ | async
      } as vm"
    >
      <eustrosoft-front-upload-object
        *ngFor="
          let uploadObjectForm of uploadObjectForms.controls;
          let i = index
        "
        [uploadObjectForm]="uploadObjectForm"
        [formIndex]="i"
        [slvlOptions]="vm.securityLevel || []"
        (fileDeleted)="deleteFile($event)"
        (fileUploadCanceled)="cancelFileUpload($event)"
        class="col-4"
      ></eustrosoft-front-upload-object>
    </ng-container>
  </div>
</div>

<eustrosoft-front-input-file
  [control]="fileControl"
  [multiple]="true"
  [hidden]="true"
></eustrosoft-front-input-file>

<!--<ng-container *ngIf="fileControlValueChanges$ | async"></ng-container>-->
<!--<ng-container *ngIf="upload$ | async"></ng-container>-->
