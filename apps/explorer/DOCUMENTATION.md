# Документация приложения explorer

## Содержание
- [Введение](#введение)
- [Начало работы](#начало-работы)
- [Структура проекта](#структура-проекта)
- [Компоненты](#компоненты)
  - [Компонент AppComponent](#компонент-appcomponent)
  - [Компонент BreadcrumbsComponent](#компонент-breadcrumbscomponent)
  - [Компонент CreateRenameFolderDialogComponent](#компонент-createrenamefolderdialogcomponent)
  - [Компонент FilesystemTableComponent](#компонент-filesystemtablecomponent)
  - [Компонент MoveCopyDialogComponent](#компонент-movecopydialogcomponent)
  - [Компонент UploadObjectComponent](#компонент-uploadobjectcomponent)
  - [Компонент UploadOverlayComponent](#компонент-uploadoverlaycomponent)
  - [Компонент UploadPageComponent](#компонент-uploadpagecomponent)
- [Сервисы](#сервисы)
  - [Сервис ExplorerService](#сервис-explorerservice)
  - [Сервис ExplorerPathService](#сервис-explorerpathservice)
  - [Сервис ExplorerRequestBuilderService](#сервис-explorerrequestbuilderservice)
  - [Сервис ExplorerUploadService](#сервис-exploreruploadservice)
  - [Сервис ExplorerUploadItemFormFactoryService](#сервис-exploreruploaditemformfactoryservice)
  - [Сервис ExplorerUploadItemsService](#сервис-exploreruploaditemsservice)
- [Классы](#классы)
  - [Класс Stack](#класс-stack)
- [Модули](#модули)
  - [Модуль AppModule](#модуль-appmodule)
- [Маршрутизация и навигация](#маршрутизация-и-навигация)
- [Тестирование](#тестирование)
- [Развертывание](#развертывание)
- [Лицензия](#лицензия)

## Введение

Проект `explorer` представляет собой реализацию файловой системы в браузерном интерфейсе.

## Начало работы

См. `README.md` в корне репозитория, подзаголовок "Локальный запуск"

## Структура проекта

- `src/app/explorer`: директория с основными программными компонентами приложения
  - `src/app/explorer/components`: `Angular` компоненты, используемые в приложении
  - `src/app/explorer/constants`: константы и перечисления
  - `src/app/explorer/services`: сервисы с бизнес логикой
- `src/app/login-page`: обертка для страницы логина (за основу используется компонент из библиотеки `core`)

## Компоненты

### Компонент `AppComponent`

Корневой компонент, отображает `header` из библиотеки и рендерит в `<router-outlet></router-outlet>`
компоненты соответствующие маршрутам в `apps/explorer/src/app/app.routes.ts`

### Компонент `BreadcrumbsComponent`

Компонент, отображающий путь, на котором находится пользователь в файловой системе. 
Позволяет переходить к папке на любом уровне по клику

### Компонент `CreateRenameFolderDialogComponent`

Компонент позволяющий создавать и переименовывать файлы и папки. Представляет собой диалоговое окно с полем ввода

### Компонент `FilesystemTableComponent`

Таблица, отображающая контент файловой системы. На вход принимает массив из объектов файловой системы. 
Уведомляет родительский компонент посредством `@Output()` декоратора о произведении действия с каким-либо элементом файловой системы.
Позволяет выбирать множество строк в таблице через зажатую клавишу `Shift` и левую кнопку мыши

### Компонент `MoveCopyDialogComponent`

Диалоговое окно для копирования или перемещения объектов файловой системы.
Представляет собой мини аналог проводника, с возможностью выбора конкретной папки для перемещения или копирования

### Компонент `UploadObjectComponent`

Компонент для новой реализации загрузки файлой в систему. На данный момент находится в проектировании

### Компонент `UploadOverlayComponent`

Компонент для отображения загружаемых файлов и управления процессом загрузки. 
Можно отменять загрузку одного или всех файлов, которые находятся в очереди

### Компонент `UploadPageComponent`

Компонент для новой реализации загрузки файлой в систему. На данный момент находится в проектировании

### Компонент `LoginPageComponent`

Представляет собой страницу для аутентификации. Использует `LoginComponent` из библиотеки `@eustrosoft-front/common-ui`.
Внутрь библиотечного компонента передается локализированный текст и путь, куда перенаправить после успешной аутентфикации.

### Компонент `ExplorerComponent`

Родительский компонент для большинства вышеперечисленных комопонентов. Содержит все основные вызовы по работе с файловой системой, а также обеспечивает взаимодействие с сервисами. 

## Сервисы

### Сервис `ExplorerService`

Сервис для работы вызовами проткола `Qtis` для осуществления операций с файловой системой, а также скачивания файлов 

### Сервис `ExplorerPathService`

Сервис, работающий с путем в файловой системы

### Сервис `ExplorerRequestBuilderService`

Сервис, формирующий тела запросов для протокола `Qtis`

### Сервис `ExplorerUploadService`

Сервис, отвечающий за дробление файлов на куски (чанки) одинакового размера и их последующую загрузку.
На текущий момент реализовано несколько вариантов дробления файлов в разных представлениях: бинарные данные, `hex` строка, `base64` строка

### Сервис `ExplorerUploadItemFormFactoryService`

Сервис для новой реализации загрузки. На данный момент находится в проектировании

### Сервис `ExplorerUploadItemsService`

Сервис, хранящий состояние о загружаемых на сервер объектах файловой системы

## Классы

### Класс `Stack`

Данный класс используется для хранения состояние о навигации пользователя в компоненте `MoveCopyDialogComponent`.
По мере перехода в глубь иерархии, `Stack` наполняется строковыми значениями путей, по которым была осуществлена навигация.
Используется для работы функционала по возвращению на предыдущий уровень в иерархии файловой системы.

## Модули

### Модуль `AppModule`

Объединяет все компоненты, сервисы, классы приложения `explorer`. Также обеспечивает доступ к классу `Stack` для компонентов и сервисов через инъекцию зависимостей
 
## Маршрутизация и навигация

Файл с маршрутизацией: `apps/explorer/src/app/app.routes.ts`

## Тестирование

На текущий момент в проекте отсутствуют тесты и инструкции по их запуску

## Развертывание

См. `README.md` в корне репозитория, подзаголовок "Развертывание"

## Лицензия

См. `LICENSE` в корне репозитория
